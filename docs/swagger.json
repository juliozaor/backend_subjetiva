{"openapi":"3.0.0","info":{"title":"Documentación APIs MESS-Modelo de negocios especiales","version":"1.0.0","description":"Documentación de las APIs del aplicativo MESS-Modelo de negocios especiales"},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"Bearer","bearerFormat":"JWT"}},"schemas":{"claveTemporal":{"type":"bool","description":"validar si el usuario esta bloqueado","example":false},"modulo":{"$ref":"#/definitions/Modulo","example":{"id":"101,","nombre":"Inicio,","ruta":"/general"}},"paginacion":{"$ref":"#/definitions/paginacion","example":{"totalRegistros":2,"paginaActual":1,"totalPaginas":2}},"Rol":{"$ref":"#/definitions/Rol","example":{"_id":"003,","_nombre":"vigilado,","_root":"true,","_estado":"false,","_creacion":"2024-03-19T17:32:28.342-05:00,","_actualizacion":"2024-03-19T17:32:28.342-05:00,"}},"token":{"type":"string","description":"token de autenticación","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkb2N1bWVudG8iOiI5MDA0NjExOTYiLCJpZFJvbCI6IjAwMyIsImlhdCI6MTcxMDI4MDY2NiwiZXhwIjoxNzEwMzY3MDY2fQ.ANhxg9ym3WQUug0Y5IZWj_ZQOYRGdw5HODMAdFRxx9A"},"Usuario":{"$ref":"#/definitions/Usuario","example":{"id":"dc18f0da-6c3b-4dcb-b551-23bb3be299f7","nombre":"Jose","usuario":200200200,"clave":"ed3424dfsf","telefono":3000000000,"correo":"correo@hotmail.com","fecha_nacimiento":"2022-11-20 13:00:26","cargo":"vigilado","apellido":"herrera","identificacion":200200200,"id_rol":3}},"usuarioLogin":{"$ref":"#/definitions/usuarioLogin","example":{"id":"fda32ceec-37d5b-40wff-b3d08-feb8a71","usuario":12221313,"nombre":"USUARIO LOGUEADO.","apellido":null,"telefono":null,"correo":"correo@gmail.com"}}}},"paths":{"/api/v1/autenticacion/cambiar-clave":{"post":{"tags":["Autenticación"],"description":"cambiar contraseña","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["identificacion","clave","nuevaClave"],"properties":{"identificacion":{"type":"integer"},"clave":{"type":"string"},"nuevaClave":{"type":"string"}}}}}},"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"mensaje":{"type":"string"},"estado":{"type":"integer"}},"example":{"mensaje":"Su contraseña ha sido cambiada exitosamente","estado":200}}}}},"400":{"description":"Petición fallida","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}},"example":{"message":"Credenciales incorrectas, por favor intente recuperar contraseña con su correo registrado en Vigia"}}}}}}}},"/api/v1/autenticacion/inicio-sesion":{"post":{"tags":["Autenticación"],"description":"inicio de sesión","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["usuario","contrasena"],"properties":{"usuario":{"type":"integer"},"contrasena":{"type":"string"}}}}}},"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"usuario":{"$ref":"#/components/schemas/usuarioLogin"},"token":{"$ref":"#/components/schemas/token"},"rol":{"type":"object","properties":{"id":{"type":"string","example":"101"},"nombre":{"type":"string","example":"Administrador"},"modulos":{"type":"array","items":{"$ref":"#/components/schemas/modulo"}}}},"claveTemporal":{"$ref":"#/components/schemas/claveTemporal"}}}}}}}}},"/api/v1/envio-email":{"post":{"tags":["Autenticación"],"description":"olvido la contraseña","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["usuario","correo"],"properties":{"usuario":{"type":"integer"},"correo":{"type":"string"}}}}}},"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"mensaje":{"type":"string"}},"example":{"mensaje":"Mensaje enviado correctamente"}}}}},"400":{"description":"Petición fallida","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}},"example":{"message":"usuario no encontrado y/o correo incorrecto"}}}}}}}},"/api/v1/rol":{"get":{"tags":["Rol"],"security":[{"bearerAuth":[]}],"description":"Listar roles","produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"rols":{"type":"array","items":{"$ref":"#/components/schemas/Rol"}}}}}}}}}},"/api/v1/usuarios/{documento}":{"patch":{"tags":["Usuario"],"security":[{"bearerAuth":[]}],"description":"Actualizar un usuario","parameters":[{"name":"documento","in":"path","type":"int"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"nombre":{"type":"string"},"apellido":{"type":"string"},"cargo":{"type":"string"},"identificacion":{"type":"integer"},"telefono":{"type":"string"},"correo":{"type":"string"},"fechaNacimiento":{"type":"string"},"idRol":{"type":"string"}}}}}},"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"dc18f0da-6c3b-4dcb-b551-23bb3be299f7"},"nombre":{"type":"string","example":"Jose"},"usuario":{"type":"string","example":200200200},"clave":{"type":"string","example":"ed3424dfsf"},"telefono":{"type":"string","example":3000000000},"correo":{"type":"string","example":"correo@hotmail.com"},"fecha_nacimiento":{"type":"string","example":"2022-11-20 13:00:26"},"cargo":{"type":"string","example":"vigilado"},"apellido":{"type":"string","example":"herrera"},"identificacion":{"type":"integer","example":200200200},"id_rol":{"type":"string","example":3}}}}}}}}},"/api/v1/usuarios/registro":{"post":{"tags":["Usuario"],"security":[{"bearerAuth":[]}],"description":"Registrar un usuario","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"nombre":{"type":"string"},"apellido":{"type":"string"},"cargo":{"type":"string"},"identificacion":{"type":"integer"},"telefono":{"type":"string"},"correo":{"type":"string"},"fechaNacimiento":{"type":"string"},"idRol":{"type":"string"}}}}}},"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"dc18f0da-6c3b-4dcb-b551-23bb3be299f7"},"nombre":{"type":"string","example":"Jose"},"usuario":{"type":"string","example":200200200},"clave":{"type":"string","example":"ed3424dfsf"},"telefono":{"type":"string","example":3000000000},"correo":{"type":"string","example":"correo@hotmail.com"},"fecha_nacimiento":{"type":"string","example":"2022-11-20 13:00:26"},"cargo":{"type":"string","example":"vigilado"},"apellido":{"type":"string","example":"herrera"},"identificacion":{"type":"integer","example":200200200},"id_rol":{"type":"string","example":3}}}}}}}}},"/api/v1/usuarios/listar?termino={termino}&rol={rol}&pagina={pagina}&limite={limite}":{"get":{"tags":["Usuario"],"security":[{"bearerAuth":[]}],"description":"Listar usuarios","parameters":[{"name":"termino","in":"path","type":"string","required":false},{"name":"rol","in":"path","type":"string","required":false},{"name":"pagina","in":"path","type":"int","required":false},{"name":"limite","in":"path","type":"int","required":false}],"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"usuarios":{"type":"array","items":{"$ref":"#/components/schemas/Usuario"}},"paginacion":{"$ref":"#/components/schemas/paginacion"}}}}}}}}},"/api/v1/usuarios/usuario/{documento}":{"get":{"tags":["Usuario"],"security":[{"bearerAuth":[]}],"description":"Consultar un usuario","parameters":[{"name":"documento","in":"path","type":"int"}],"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"dc18f0da-6c3b-4dcb-b551-23bb3be299f7"},"nombre":{"type":"string","example":"Jose"},"usuario":{"type":"string","example":200200200},"clave":{"type":"string","example":"ed3424dfsf"},"telefono":{"type":"string","example":3000000000},"correo":{"type":"string","example":"correo@hotmail.com"},"fecha_nacimiento":{"type":"string","example":"2022-11-20 13:00:26"},"cargo":{"type":"string","example":"vigilado"},"apellido":{"type":"string","example":"herrera"},"identificacion":{"type":"integer","example":200200200},"id_rol":{"type":"string","example":3}}}}}}}}}},"definitions":{"Modulo":{"type":"object","properties":{"id":{"type":"string"},"nombre":{"type":"string"},"ruta":{"type":"string"}}},"paginacion":{"type":"object","properties":{"totalRegistros":{"type":"integer"},"paginaActual":{"type":"integer"},"totalPaginas":{"type":"integer"}}},"Rol":{"type":"object","properties":{"_id":{"type":"string"},"_nombre":{"type":"string"},"_root":{"type":"bool"},"_estado":{"type":"bool"},"_creacion":{"type":"string"},"_actualizacion":{"type":"string"}}},"Usuario":{"type":"object","properties":{"id":{"type":"string"},"nombre":{"type":"string"},"usuario":{"type":"string"},"clave":{"type":"string"},"telefono":{"type":"string"},"correo":{"type":"string"},"fecha_nacimiento":{"type":"string"},"cargo":{"type":"string"},"apellido":{"type":"string"},"identificacion":{"type":"integer"},"id_rol":{"type":"string"}}},"usuarioLogin":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"Identificador del usuario"},"usuario":{"type":"string","description":"Nombre de usuario"},"nombre":{"type":"string","description":"Nombre del usuario"},"apellido":{"type":"string","description":"Apellido del usuario"},"telefono":{"type":"string","description":"Teléfono del usuario"},"correo":{"type":"string","description":"Correo del usuario"}}}},"tags":[]}